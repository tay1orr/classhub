<!DOCTYPE html>
<html>
<head>
    <title>게시글 게시판 수정</title>
</head>
<body>
    <h2>게시글 게시판 변경</h2>
    <button onclick="fixMemoryPost()">우리반 처음 만난 날 게시글을 추억 게시판으로 이동</button>
    <div id="result"></div>

    <script>
        function fixMemoryPost() {
            try {
                // localStorage에서 게시글 가져오기
                const posts = JSON.parse(localStorage.getItem('classhub_posts') || '[]');
                
                // "우리반 처음 만난 날" 제목을 가진 게시글 찾기
                const postIndex = posts.findIndex(post => 
                    post.title && post.title.includes('우리반 처음 만난 날')
                );
                
                if (postIndex !== -1) {
                    // 해당 게시글의 board를 memories로 변경
                    posts[postIndex].board = 'memories';
                    posts[postIndex].hasImage = false; // 필요한 경우
                    
                    // localStorage에 다시 저장
                    localStorage.setItem('classhub_posts', JSON.stringify(posts));
                    
                    document.getElementById('result').innerHTML = 
                        '<p style="color: green;">성공! "우리반 처음 만난 날" 게시글이 추억 게시판으로 이동되었습니다.</p>' +
                        '<p>페이지를 새로고침하면 변경사항이 반영됩니다.</p>';
                } else {
                    document.getElementById('result').innerHTML = 
                        '<p style="color: orange;">해당 제목의 게시글을 찾을 수 없습니다.</p>' +
                        '<p>현재 저장된 모든 게시글:</p>' +
                        '<pre>' + JSON.stringify(posts.map(p => ({title: p.title, board: p.board})), null, 2) + '</pre>';
                }
                
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<p style="color: red;">오류 발생: ' + error.message + '</p>';
            }
        }
        
        // 페이지 로드시 현재 게시글 목록 표시
        window.onload = function() {
            try {
                const posts = JSON.parse(localStorage.getItem('classhub_posts') || '[]');
                console.log('현재 저장된 게시글들:', posts);
                
                const examPosts = posts.filter(p => p.board === 'exam');
                const memoryPosts = posts.filter(p => p.board === 'memories');
                
                document.getElementById('result').innerHTML = 
                    '<h3>현재 상태:</h3>' +
                    '<p>지필평가 게시글: ' + examPosts.length + '개</p>' +
                    '<p>추억 게시글: ' + memoryPosts.length + '개</p>' +
                    '<h4>지필평가 게시글 목록:</h4>' +
                    '<ul>' + examPosts.map(p => '<li>' + p.title + '</li>').join('') + '</ul>';
                    
            } catch (error) {
                console.error('Error:', error);
            }
        };
    </script>
</body>
</html>